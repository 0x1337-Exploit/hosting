<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contoh Picture-in-Picture API</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        video { width: 80%; max-width: 800px; margin: 20px 0; }
        button { padding: 10px 20px; font-size: 16px; }
        #log { margin-top: 20px; color: #555; }
    </style>
</head>
<body>
    <h1>Demo Picture-in-Picture API</h1>
    <video controls autoplay muted loop playsinline>
        <source src="https://storage.googleapis.com/media-session/caminandes/short.mp4" type="video/mp4">
        Browser Anda tidak mendukung elemen video.
    </video>
    <br>
    <button id="pipButton">Masuk Mode Picture-in-Picture</button>
    <pre id="log"></pre>

    <script>
        const video = document.querySelector('video');
        const pipButton = document.getElementById('pipButton');
        const log = document.getElementById('log');

        // Cek dukungan PiP
        if ('pictureInPictureEnabled' in document && !video.disablePictureInPicture) {
            pipButton.disabled = false;

            pipButton.addEventListener('click', async () => {
                pipButton.disabled = true;
                try {
                    if (video !== document.pictureInPictureElement) {
                        await video.requestPictureInPicture();
                        pipButton.textContent = 'Keluar Mode Picture-in-Picture';
                        log.textContent = 'Video masuk mode PiP!';
                    } else {
                        await document.exitPictureInPicture();
                        pipButton.textContent = 'Masuk Mode Picture-in-Picture';
                        log.textContent = 'Video keluar dari mode PiP.';
                    }
                } catch (error) {
                    log.textContent = `Error: ${error}`;
                } finally {
                    pipButton.disabled = false;
                }
            });

            // Event listener untuk perubahan status PiP
            video.addEventListener('enterpictureinpicture', () => {
                log.textContent = 'Entered PiP mode';
            });
            video.addEventListener('leavepictureinpicture', () => {
                log.textContent = 'Left PiP mode';
                pipButton.textContent = 'Masuk Mode Picture-in-Picture';
            });
        } else {
            pipButton.disabled = true;
            log.textContent = 'Picture-in-Picture tidak didukung di browser ini.';
        }
    </script>
</body>
</html>
