<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Virtual Keyboard Simpel</title>
<style>
  body {
    font-family: Arial, Helvetica, sans-serif;
    background: #0f0f1a;
    color: #e0e0ff;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    padding: 20px;
    box-sizing: border-box;
  }

  .output {
    width: 100%;
    max-width: 700px;
    min-height: 80px;
    margin-bottom: 25px;
    padding: 15px;
    font-size: 1.4rem;
    background: #1a1a2e;
    border: 2px solid #444;
    border-radius: 10px;
    white-space: pre-wrap;
    word-break: break-all;
    resize: vertical;
  }

  .keyboard {
    display: grid;
    grid-template-columns: repeat(14, 50px);
    gap: 6px;
    max-width: 780px;
    justify-content: center;
  }

  .key {
    height: 52px;
    border: none;
    border-radius: 6px;
    background: linear-gradient(145deg, #2a2a4a, #1e1e38);
    color: white;
    font-size: 1.1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    user-select: none;
    transition: all 0.12s;
    box-shadow: 0 3px #111827;
  }

  .key:hover { background: #3a3a5a; transform: translateY(-1px); }
  .key:active { transform: translateY(2px); box-shadow: 0 1px #111827; }

  .key.wide { grid-column: span 2; }
  .key.space { grid-column: span 7; background: #252545; }
  .key.backspace { background: #c53030; }
  .key.enter { background: #2f855a; grid-column: span 2; }

  .row { display: contents; }
</style>
</head>
<body>

<h2>Virtual Keyboard Simpel</h2>

<textarea class="output" id="output" placeholder="Klik tombol di bawah atau ketik di sini..."></textarea>

<div class="keyboard" id="keyboard"></div>

<script>
// Layout QWERTY Indonesia (mirip US + beberapa karakter khusus)
const layout = [
  "` 1 2 3 4 5 6 7 8 9 0 - =",
  "q w e r t y u i o p [ ] \\",
  "a s d f g h j k l ; '",
  "z x c v b n m , . /",
  "shift space backspace enter"
];

const keyboard = document.getElementById('keyboard');
const output = document.getElementById('output');

let caps = false;

function createKey(text, className = '') {
  const key = document.createElement('button');
  key.className = 'key ' + className;
  key.textContent = text;
  key.dataset.value = text;
  return key;
}

function buildKeyboard() {
  keyboard.innerHTML = '';

  layout.forEach((row, rowIndex) => {
    const chars = row.split(' ');

    chars.forEach(char => {
      let keyEl;

      if (char === 'space') {
        keyEl = createKey('Space', 'space wide');
        keyEl.dataset.value = ' ';
      } else if (char === 'backspace') {
        keyEl = createKey('← Backspace', 'backspace wide');
        keyEl.dataset.value = 'backspace';
      } else if (char === 'enter') {
        keyEl = createKey('Enter ⏎', 'enter');
        keyEl.dataset.value = '\n';
      } else if (char === 'shift') {
        keyEl = createKey('Shift ⇧', 'wide');
        keyEl.dataset.value = 'shift';
      } else {
        keyEl = createKey(char);
      }

      keyboard.appendChild(keyEl);
    });
  });
}

function insertText(value) {
  if (value === 'shift') {
    caps = !caps;
    updateCaps();
    return;
  }

  if (value === 'backspace') {
    output.value = output.value.slice(0, -1);
    return;
  }

  const start = output.selectionStart;
  const end = output.selectionEnd;
  const text = caps ? value.toUpperCase() : value.toLowerCase();

  output.value = 
    output.value.substring(0, start) +
    text +
    output.value.substring(end);

  output.selectionStart = output.selectionEnd = start + text.length;
  output.focus();
}

function updateCaps() {
  document.querySelectorAll('.key:not(.wide):not(.space):not(.backspace):not(.enter)')
    .forEach(k => {
      const val = k.dataset.value;
      if (val.length === 1 && /[a-zA-Z]/.test(val)) {
        k.textContent = caps ? val.toUpperCase() : val.toLowerCase();
        k.dataset.value = caps ? val.toUpperCase() : val.toLowerCase();
      }
    });
}

buildKeyboard();

keyboard.addEventListener('click', e => {
  if (!e.target.classList.contains('key')) return;
  const value = e.target.dataset.value;
  insertText(value);
});

// Biar tetap bisa ketik manual juga
output.addEventListener('keydown', e => {
  // Biarkan browser handle shortcut biasa (Ctrl+A, Ctrl+C, dll)
  if (e.ctrlKey || e.metaKey) return;
  
  // Blok karakter normal supaya hanya lewat virtual keyboard (optional)
  // e.preventDefault(); // <-- uncomment kalau mau full virtual only
});
</script>

</body>
</html>
